<!DOCTYPE html>
<html>
<head>
    <title>Guess the Song</title>
    <script>
        async function checkSong() {
            const title = document.getElementById('title').value;
            const composer = document.getElementById('composer').value;
            const obd = document.getElementById('obd').value;

            const response = await fetch('/check_song', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: new URLSearchParams({ title, composer,obd }),
            });

            const result = await response.json();
            document.getElementById('feedback').innerText = result.feedback;
        }
    </script>
</head>
<body>
    <h1>Guess the Song</h1>
    <audio controls>
        <source src="/static/{{ mp3_file }}" type="audio/mp3">
        Your browser does not support the audio element.
    </audio>
    <form onsubmit="event.preventDefault(); checkSong();">
        <label for="title">Title:</label>
        <input type="text" id="title" name="title" required>
        <br>
        <label for="composer">Composer:</label>
        <input type="text" id="composer" name="composer" required>
        <br>
        <label for="obd">Obd:</label>
        <input type="text" id="obd" name="obd" required>
        <br>
        <button type="submit">Go</button>
    </form>
    <p id="feedback"></p>
</body>
</html>